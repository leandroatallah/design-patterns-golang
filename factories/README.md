# Factory method

> The factory method pattern in OOP helps create objects without specifying their exact classes. Objects are created by calling a factory method instead of a constructor. These methods can be defined in interfaces and implemented by subclasses, or created in a base class with optional overriding by subclasses.(Wikipedia)
> Factory Method is a creational design pattern that provides an interface for creating objects in a superclass, but allows subclasses to alter the type of objects that will be created. (Refactoring Guru)

## Factory Method explanation

1. The **Product** declares the interface, which is common to all objects that can be produced by the creator and its subclasses.
2. **Concrete Products** are different implementations of the product interface.
3. The **Creator** class declares the factory method that returns new product objects. It’s important that the return type of this method matches the product interface.
4. **Concrete Creators** override the base factory method so it returns a different type of product.

> :warning: Creator's main role isn't product creation. It typically contains core business logic related to products. Factory method decouples this logic from concrete product classes.

> :warning: Note that the factory method doesn’t have to **create** new instances all the time. It can also return existing objects from a cache, an object pool, or another source.

### Factory Method example

```go
package main

import "fmt"

/*
* Product interface: All concrete products must implement this interface
* Creator class: base class to concrete creators. Must return a Product interface.
* Concrete creators: Must implement creator class method and return a Product interface.
* Concrete product: Generated by concrete. Must implements Product Interface.
 */

// Abstract Creator
type EmployeeCreator interface {
 CreateEmployee() Employee
}

// Concreate Creator
type DeveloperCreator struct {
}

func (c *DeveloperCreator) CreateEmployee(name string) Employee {
 return &DeveloperEmployee{name}
}

func NewDeveloperCreator() *DeveloperCreator {
 return &DeveloperCreator{}
}

type ManagerCreator struct {
 name string
}

func (c *ManagerCreator) CreateEmployee(name string) Employee {
 return &ManagerEmployee{name}
}
func NewManagerCreator() *ManagerCreator {
 return &ManagerCreator{}
}

// Product interface
type Employee interface {
 GetName() string
 SetName(name string)
}

// Product concrete
type DeveloperEmployee struct {
 name string
}

func (e *DeveloperEmployee) GetName() string {
 return fmt.Sprintf("Developer name: %s", e.name)
}
func (e *DeveloperEmployee) SetName(name string) {
 e.name = name
}

type ManagerEmployee struct {
 name string
}

func (e *ManagerEmployee) GetName() string {
 return fmt.Sprintf("Manager name: %s", e.name)
}
func (e *ManagerEmployee) SetName(name string) {
 e.name = name
}

func main() {
 devCreator := NewDeveloperCreator()
 developer := devCreator.CreateEmployee("William")
 fmt.Println(developer.GetName())

 managerCreator := NewManagerCreator()
 manager := managerCreator.CreateEmployee("Edward")
 fmt.Println(manager.GetName())
}
```

### Factory function generator example

```go
package main

import "fmt"

type Employee struct {
 Name, Position string
 AnnualIncome   int
}

func NewEmployeeFactoryClosure(position string, annualIncome int) func(name string) *Employee {
 return func(name string) *Employee {
  return &Employee{name, position, annualIncome}
 }
}

type EmployeeFactory struct {
 position     string
 annualIncome int
}

func (f *EmployeeFactory) Create(name string) *Employee {
 return &Employee{name, f.position, f.annualIncome}
}

func NewEmployeeFactory(position string, annualIncome int) *EmployeeFactory {
 return &EmployeeFactory{position, annualIncome}
}

func main() {
 // Closure approach
 employeeFactory := NewEmployeeFactoryClosure("Developer", 80000)
 employee := employeeFactory("Axel")
 fmt.Println(employee)

 // Specialized object approach
 bossFactory := NewEmployeeFactory("CEO", 100000)
 boss := bossFactory.Create("Mark")
 fmt.Println(boss)
}
```
